# 开服时间计算
execute store result score server_days server_days run time query gametime
scoreboard players operation server_days server_days /= 24000 24000

# 新人登录
tellraw @a[tag=!oldPlayer] [{"text":"Welcome!! ","color":"red","bold":true},{"text":"欢迎新人加入 ","color":"yellow","bold":false},{"text":"摸鱼村服(VMYS)","color":"#ffbf71","bold":true,"underlined":true,"hoverEvent":{"action":"show_text","value":"Village MOYU Server 简称 VMYS\n目前为1.16.x周目（二周目）"}}]
tellraw @a[tag=!oldPlayer] [{"text":"本服现为 ","color":"yellow"},{"text":"JE1.16(pre) vanilla server","color":"aqua","underlined":true,"hoverEvent":{"action":"show_text","value":"JAVA版1.16.x 原版端\n挂Fabric加入carpet,bbor\n挂MCDReforged"}},{"text":" 点击切换[创造服]","clickEvent":{"action":"run_command","value":"/server creative"},"hoverEvent":{"action":"show_text","value":"当前 生存服\n切换创造服命令： /server creative"},"color":"red"}]
tellraw @a[tag=!oldPlayer] {"text":"------------------------------------------","color":"gray"}
tellraw @a[tag=!oldPlayer] {"text":"服务器加入了腐竹数据包实现相关功能，详情请在群内@村长，以下为部分数据包功能提示","color":"#c67dac"}
tellraw @a[tag=!oldPlayer] [{"text":"· 其中，自定义合成如压缩矿物、鞘翅潜影壳等，"},{"text":"具体可查看【群相册】","color":"blue","clickEvent":{"action":"open_url","value":"https://github.com/Flyky/Flyky_minecraft_datapack/blob/master/data/flyky/recipes/README.md"}}]
tellraw @a[tag=!oldPlayer] [{"text":"· 指令","color":"green"},{"text":" /trigger scoreSwitch set 1 ","color":"gold","clickEvent":{"action":"suggest_command","value":"/trigger scoreSwitch set 1"},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"可开启轮播计分板显示","color":"green","clickEvent":{"action":"run_command","value":"/trigger scoreSwitch set 1"},"hoverEvent":{"action":"show_text","value":"点击以触发[轮播计分板]"}}]
tellraw @a[tag=!oldPlayer] [{"text":"· 指令","color":"green"},{"text":" /trigger here ","color":"gold","clickEvent":{"action":"suggest_command","value":"/trigger here"},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"可触发自身高亮提示效果","color":"green","clickEvent":{"action":"run_command","value":"/trigger here"},"hoverEvent":{"action":"show_text","value":"点击以触发[here]"}}]
tellraw @a[tag=!oldPlayer] [{"text":"更多详细功能提示与设置可使用命令","color":"#78bee0"},{"text":"/trigger options","underlined":true,"clickEvent":{"action":"run_command","value":"/trigger options"},"hoverEvent":{"action":"show_text","value":"点击以访问全部设置"}},{"text":"访问"}]
scoreboard players add @a[tag=!oldPlayer] loginTimes 1
tag @a[tag=!oldPlayer] add oldPlayer

# 老玩家
scoreboard players add @a[scores={QuitGame=1..}] loginTimes 1
tellraw @a[scores={QuitGame=1..}] [{"text":"现在是 ","color":"#33bbaa"},{"text":"摸鱼村服VMYS","color":"#ffbf71","bold":true,"underlined":true,"hoverEvent":{"action":"show_text","value":"Village MOYU Server 简称 VMYS\n目前为1.16.x周目（二周目）"}},{"text":"(v1.16.x) 开服的第 ","color":"#33bbaa"},{"score":{"name":"server_days","objective":"server_days"},"color":"green"},{"text":" 天(游戏日) ！","color":"#33bbaa"}]
# tellraw @a[scores={QuitGame=1..}] [{"text":"现在是VMYS(v1.16.x)开服的第 ","color":"#33bbaa"},{"score":{"name":"server_days","objective":"server_days"},"color":"green"},{"text":" 天(游戏日) ！","color":"#33bbaa"},{"text":" 这是您第 ","color":"#7799aa"},{"score":{"name":"@a[scores={QuitGame=1}]","objective":"loginTimes"},"color":"dark_aqua"},{"text":" 次进服 ！","color":"#7799aa"}]
tellraw @a[scores={QuitGame=1..}] [{"text":"Welcome back ~ ","color":"red","bold":true},{"text":"欢迎回来，","color":"yellow","bold":false},{"text":" 这是您第 ","color":"#7799aa"},{"score":{"name":"@a[scores={QuitGame=1}]","objective":"loginTimes"},"color":"#cd919e"},{"text":" 次进服 ！","color":"#7799aa"}]
tellraw @a[scores={QuitGame=1..}] [{"text":"本服现为 ","color":"yellow"},{"text":"JE1.16(pre) vanilla server","color":"aqua","underlined":true,"hoverEvent":{"action":"show_text","value":"JAVA版1.16.x 原版端\n挂Fabric加入carpet,bbor\n挂MCDReforged"}},{"text":" 点击切换[创造服]","clickEvent":{"action":"run_command","value":"/server creative"},"hoverEvent":{"action":"show_text","value":"当前 生存服\n切换创造服命令： /server creative"},"color":"red"}]
tellraw @a[scores={QuitGame=1..}] {"text":"------------------------------------------","color":"gray"}
tellraw @a[scores={QuitGame=1..}] {"text":"以下为数据包部分功能提示","color":"#c67dac"}
tellraw @a[scores={QuitGame=1..}] [{"text":"· 其中，自定义合成如压缩矿物、鞘翅潜影壳等，"},{"text":"具体可查看【群相册】","color":"blue","clickEvent":{"action":"open_url","value":"https://github.com/Flyky/Flyky_minecraft_datapack/blob/master/data/flyky/recipes/README.md"}}]
tellraw @a[scores={QuitGame=1..}] [{"text":"· 指令","color":"green"},{"text":" /trigger scoreSwitch set 1 ","color":"gold","clickEvent":{"action":"suggest_command","value":"/trigger scoreSwitch set 1"},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"可开启轮播计分板显示","color":"green","clickEvent":{"action":"run_command","value":"/trigger scoreSwitch set 1"},"hoverEvent":{"action":"show_text","value":"点击以触发[轮播计分板]"}}]
tellraw @a[scores={QuitGame=1..}] [{"text":"· 指令","color":"green"},{"text":" /trigger here ","color":"gold","clickEvent":{"action":"suggest_command","value":"/trigger here"},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"可触发自身高亮提示效果","color":"green","clickEvent":{"action":"run_command","value":"/trigger here"},"hoverEvent":{"action":"show_text","value":"点击以触发[here]"}}]
execute if score tagplayer carpet matches 1 run tellraw @a[scores={QuitGame=1..}] [{"text":"使用","color":"dark_red"},{"text":"/tagplayer summon 玩家名","underlined":true,"color":"red","clickEvent":{"action":"suggest_command","value":"/tagplayer summon "},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"召唤假人","color":"dark_red"}]
execute unless score tagplayer carpet matches 1 run tellraw @a[scores={QuitGame=1..}] [{"text":"使用","color":"dark_red"},{"text":"/script invoke summon 玩家名","underlined":true,"color":"red","clickEvent":{"action":"suggest_command","value":"/script invoke summon "},"hoverEvent":{"action":"show_text","value":"点击以写入聊天栏"}},{"text":"召唤假人","color":"dark_red"}]
tellraw @a[scores={QuitGame=1..}] [{"text":"更多详细功能提示与设置可使用命令","color":"#5fa3c4"},{"text":"/trigger options","underlined":true,"clickEvent":{"action":"run_command","value":"/trigger options"},"hoverEvent":{"action":"show_text","value":"点击以访问全部设置"}},{"text":"访问"}]
scoreboard players set @a[scores={QuitGame=1..}] QuitGame 0